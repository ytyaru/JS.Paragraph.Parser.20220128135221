# 中間書式。パラグラフ

　2行以上の改行があればパラグラフとする。

```
パラグラフ１。

パラグラフ２。
```
```html
<p>パラグラフ１。</p>
<p>パラグラフ２。</p>
```

　字下げがほしければ全角スペースを入れること。

```
　パラグラフ１。

　パラグラフ２。
```
```html
<p>　パラグラフ１。</p>
<p>　パラグラフ２。</p>
```

　パラグラフの中に複数の段落を書く。

```
　パラグラフ１の段落１。長くなってきた。
　パラグラフ１の段落２。ひとつだけ改行を入れる。

　パラグラフ２。
```
```html
<p>　パラグラフ１の段落１。長くなってきた。<br>　パラグラフ１の段落２。ひとつだけ改行を入れる。</p>
<p>　パラグラフ２。</p>
```

　WEB小説では複数行の改行をいれることがある。その理由は読みやすさだったり、表現手法だったりする。ただしそれを再現するためには複数の`<br>`では不可能なときがある。アクセシビリティの観点から複数の`<br>`をひとつにまとめるブラウザが存在するからだ。そこで、複数の改行を表現するためにはCSSの`margin-block-end:3em;`などで指定してやる必要がある。

```
　複数の改行を表現するかどうかは設定によって変更できる。ふつうの本であればfalse。詩やWEB小説などの表現で用いたいときはtrueにする。



　改行が３行以上あるとき、複数の改行表現が用いられる。`<p class="newline-3">...</p>`や`<p style="margin-block-end:3em;">...</p>`で指定する。
```
```html
<p style="margin-block-end:3em;">　複数の改行を表現するかどうかは設定によって変更できる。ふつうの本であればfalse。詩やWEB小説などの表現で用いたいときはtrueにする。</p>
<p>　改行が３行以上あるとき、複数の改行表現が用いられる。<code><p class="newline-3">...</p></code><code><p style="margin-block-end:3em;">...</p></code>で指定する。</p>
```

## 実装

```javascript
const p = new Parser(ParseSet(new ParagraphInput(), new ParagraphOutput()));
const text = `
　パラグラフ１。下の行に２つの改行があるときパラグラフになる。改行箇所に空白文字が含まれていても無視する。HTMLに変換するとき、その空白文字は削除される。

　パラグラフ２。最終行のときは下に改行がなくともパラグラフになる。複数行表現がOFFなら末尾の改行は無視される。


　パラグラフ３。仮に３行以上の改行があっても、複数行表現がOFFなら無視される。

　パラグラフ４。パラグラフ内に１行だけ改行があり、直後に１字以上の空白文字以外の字があればbrタグに変換する。
　たとえばこのように。

――そのとき、神風が吹いた

「僕らはみんな生きている♪　生きているから書くんだ♪」

　上記のようにダッシュや鉤括弧ではじまるときは字下げすべきでない。字下げについては全角スペースを入れるか否かで制御する。自動化したいならlintツールを用いる。いずれにせよ本パーサでは対象外。
`;
const html = p.parse(text);
```

```javascript
const p = new Parser(ParseSet(new ParagraphMultiLineMarginInput(), new ParagraphMultiLineMarginOutput()));
const text = `
　パラグラフ１。複数行をマージンで表現する。


　詩やWEB小説など文芸ではまれにそうした表現をしたいときもある。そのときはそれ用のパースセットを作成すること。


　


　以上。
`;
const html = p.parse(text);
```


## 基礎

　パラグラフとは要約文と詳細文の順に書かれた意味単位のまとまりである。大抵４文前後で構成されている。ただし意味単位、話題単位でまとめると複数文になり、長くなって読みづらくなる。また、パラグラフの中でもさらに細分化したいときもある。そこで段落を使う。

日本での正式名称|通称
----------------|----
形式段落|段落
意味段落|パラグラフ

